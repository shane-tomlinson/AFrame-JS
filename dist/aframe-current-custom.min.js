var AFrame=(function(){var a={extendsFrom:function(c,b){var d=false;if(a.func(c)){do{d=c===b;c=c.superclass}while(c&&!d)}return d},mixin:function(c,b){for(var d in b){c[d]=b[d]}return c},create:function(b,c){return b.create(c)},remove:function(b,c){b[c]=null;delete b[c]},currentID:0,getUniqueID:function(){this.currentID++;return"cid"+this.currentID},defined:function(b){return"undefined"!=typeof(b)},log:function(b){if(typeof(console)!=="undefined"){console.log(b)}},func:function(b){return"function"==typeof(b)},string:function(b){return"[object String]"===Object.prototype.toString.apply(b)},array:function(b){return"[object Array]"===Object.prototype.toString.apply(b)}};if(typeof(module)!="undefined"){module.exports=a}return a}());AFrame.Class=(function(){var a=function(){var j=[].slice.call(arguments,0),k=f(j);g(k,j);e(k);i(k);return k};a.walkChain=function(l,k){var j=k.constructor;do{l.call(k,j);j=j.superclass}while(j)};function f(j){var k;if(AFrame.func(j[0])){k=d(j[1],function(){k.sc.constructor.call(this)});h(k,j[0]);j.splice(0,1)}else{k=d(j[0],function(){})}return k}function d(j,l){var k;if(j&&j.hasOwnProperty("constructor")){k=j.constructor}else{k=l}return k}function h(o,m){var n=function(){};n.prototype=m.prototype;o.prototype=new n;o.superclass=m;o.sc=m.prototype;var j=[].slice.call(arguments,2);for(var k,l=0;k=j[l];++l){AFrame.mixin(o.prototype,k)}o.prototype.constructor=o;e(o)}function g(m,l){for(var j,k=0;j=l[k];++k){AFrame.mixin(m.prototype,j)}m.prototype.constructor=m}function e(j){if(j.prototype&&AFrame.func(j.prototype.init)&&!j.create){j.create=c.bind(null,j)}}function i(j){j.extend=a.bind(null,j)}function c(j,l){var k;if(j){try{k=new j}catch(m){AFrame.log(m.toString())}AFrame.Class.walkChain(function(n){if(n.prototype&&n.prototype.hasOwnProperty("plugins")){b(k,n.prototype.plugins)}},k);l=l||{};b(k,l.plugins||[]);k.init(l)}else{throw"Class does not exist."}return k}function b(m,j){for(var k=0,l;l=j[k];++k){l=AFrame.array(l)?l:[l];var n=AFrame.mixin({plugged:m},l[1]||{});l[0].create(n)}}return a}());AFrame.Observable=(function(){var a=AFrame.Class({init:function(){this.callbacks={}},teardown:function(){this.unbindAll()},trigger:function(){var c=this,b;c.triggered=true;for(b in c.callbacks){c.callbacks[b].apply(c,arguments)}},bind:function(c){var b=AFrame.getUniqueID();this.callbacks[b]=c;return b},unbind:function(b){AFrame.remove(this.callbacks,b)},unbindAll:function(){var c=this,b;for(b in c.callbacks){AFrame.remove(c.callbacks,b)}},isTriggered:function(){return !!this.triggered}});return a}());AFrame.ObservablesMixin={triggerEvent:function(){var f=this,e=arguments[0],d=!AFrame.string(e),b=d?e.type:e,g=f.handlers&&f.handlers[b];if(g){e=d?e:{type:e};f.setEventData(e);var a=f.getEventObject(),c=Array.prototype.slice.call(arguments,1);c.splice(0,0,a);g.trigger.apply(g,c);return a}},setEventData:function(b){var a=this;if(a.eventData){AFrame.mixin(a.eventData,b)}else{a.eventData=b}},getEventObject:function(){var b=this;if(!b.eventData.target){b.eventData.target=b}var a=b.event||AFrame.Event.create(b.eventData);b.eventData=b.event=null;return a},isEventTriggered:function(b){var c=this,a=false,d=c.handlers&&c.handlers[b];if(d){a=d.isTriggered()}return a},bindEvent:function(a,d,b){var c=this;handlers=c.handlers=c.handlers||{},bindings=c.bindings=c.bindings||{},observable=handlers[a]||AFrame.Observable.create(),eid=observable.bind(d.bind(b||c));handlers[a]=observable;bindings[eid]={object:b,observable:observable};b&&b.bindTo&&b.bindTo(c,eid);return eid},unbindEvent:function(d){var c=this.bindings,b=c&&c[d],a=b&&b.object;if(b){AFrame.remove(c,d);a&&a.unbindTo&&a.unbindTo(d);return b.observable.unbind(d)}},unbindAll:function(){var c=this,b,f,a=c.handlers,e=c.bindings,d;for(b in a){a[b].unbindAll();AFrame.remove(a,b)}for(f in e){d=e[f];AFrame.remove(e,f);if(d.object&&d.object.unbindTo){d.object.unbindTo(f)}}},proxyEvents:function(e,d){var c=this,a,b;d.forEach(function(f,g){e.bindEvent(f,function(){a=Array.prototype.slice.call(arguments,1);c.event=b=arguments[0];b.originalTarget=b.target;b.target=c;a.splice(0,0,f);c.triggerEvent.apply(c,a)})})},bindTo:function(a,d){var b=this,c=b.boundTo=b.BoundTo||{};c[d]=c[d]||{object:a}},unbindTo:function(c){var b=this.boundTo,a=b[c];if(a){a.object.unbindEvent(c);AFrame.remove(b,c)}},unbindToAll:function(){var a=this,c=a.boundTo,b;for(b in c){c[b].object.unbindEvent(b);AFrame.remove(c,b)}a.boundTo=null;a.boundTo={}}};AFrame.AObject=(function(){var b=AFrame.Class({init:function(d){var e=this;e.config=d;e.cid=d.cid||AFrame.getUniqueID();e.children={};a.call(e);e.bindEvents();e.triggerEvent("onInit")},getConfig:function(){return this.config},bindEvents:function(){c.call(this)},teardown:function(){var d=this;d.triggerEvent("onTeardown");d.unbindAll();d.unbindToAll();d.teardownChildren();d.config=d.cid=d.children=null},teardownChildren:function(){for(var e in this.children){var d=this.children[e];d.teardown();AFrame.remove(this.children,e)}},getCID:function(){return this.cid},addChild:function(d){this.children[d.getCID()]=d},removeChild:function(d){AFrame.remove(this.children,d)},triggerProxy:function(d){return this.triggerEvent.bind(this,d)}},AFrame.ObservablesMixin);function a(){var d=this;AFrame.Class.walkChain(function(e){if(e.prototype.hasOwnProperty("importconfig")){var f=e.prototype.importconfig;f.forEach(function(g){if(AFrame.defined(d.config[g])){d[g]=d.config[g]}})}},d)}function c(){var h=this,f,e,i;AFrame.Class.walkChain(function(j){if(j.prototype.hasOwnProperty("events")){f=j.prototype.events;for(e in f){i=d.call(h,e);g.call(h,i.name,i.target,f[e])}}},h);function d(j){var l=j.split(" "),k=h[l[1]]||h;return{name:l[0],target:k}}function g(k,l,j){j=AFrame.array(j)?j:[j];j.forEach(function(m){m=AFrame.func(m)?m:h[m];l.bindEvent(k,m,h)})}}return b}());AFrame.Display=(function(){var b=0;var c=AFrame.AObject.extend({init:function(e){this.target=AFrame.DOM.getElements(e.target);if(!this.target.length){throw"invalid target"}this.render();this.domEventHandlers={};c.sc.init.call(this,e);a.call(this)},teardown:function(){for(var e in this.domEventHandlers){this.unbindDOMEvent(e)}this.target=null;c.sc.teardown.call(this)},render:function(){this.triggerEvent("onRender",this)},getTarget:function(){return this.target},getDOMElement:function(){return this.target[0]},bindDOMEvent:function(i,e,k,f){var g=k.bind(f||this);var h=d.call(this,i);AFrame.DOM.bindEvent(h,e,g);b++;var j=b;this.domEventHandlers[j]={target:h,eventName:e,callback:g};return j},bindClick:function(f,g,e){return this.bindDOMEvent(f,"click",function(h){h.preventDefault();g.call(this,h)},e)},unbindDOMEvent:function(f){var e=this.domEventHandlers[f];if(e){AFrame.DOM.unbindEvent(e.target,e.eventName,e.callback);e.target=null;e.eventName=null;e.callback=null;AFrame.remove(this.domEventHandlers,f)}}});function d(f){var e;if("string"==typeof(f)){e=AFrame.DOM.getDescendentElements(f,this.getTarget())}else{e=AFrame.DOM.getElements(f)}return e}function a(){var g=this,h=g.getTarget();AFrame.Class.walkChain(function(k){if(k.prototype.hasOwnProperty("domevents")){var i=k.prototype.domevents;for(var j in i){var l=e.call(g,j);f.call(g,l.name,l.target,i[j])}}},g);function e(i){var k=i.split(" ");var j=k.length==1?g.getTarget():k.slice(1).join(" ");return{name:k[0],target:j}}function f(j,k,i){i=AFrame.array(i)?i:[i];i.forEach(function(l){l=AFrame.func(l)?l:g[l];g.bindDOMEvent(k,j,l)})}}return c})();AFrame.Event=(function(){var a=AFrame.Class({init:function(c){for(var d in c){this[d]=c[d]}if(!this.type){throw"Event type undefined"}if(this.target){this.setOriginalTarget=true}this.timestamp=new Date()},isDefaultPrevented:function(){return !!this.defaultPrevented},preventDefault:function(){this.defaultPrevented=true},proxyEvent:function(c){if(this.setOriginalTarget){this.originalTarget=this.target;this.setOriginalTarget=false}this.target=c}});var b=a.create;a.create=function(c){if(AFrame.string(c)){c={type:c}}return b(c)};return a})();AFrame.DOM=(function(){var b=typeof(window)!=="undefined"&&window.jQuery;var a={getElements:function(c){return b(c)},getDescendentElements:function(c,d){return b(d).find(c)},bindEvent:function(d,c,e){return b(d).bind(c,e)},unbindEvent:function(d,c,e){return b(d).unbind(c,e)}};return a}());