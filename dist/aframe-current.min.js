if(!Function.prototype.bind){Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}}}if(!window.console){window.console=function(){}}var AFrame={extend:function(d,f){var e=function(){};e.prototype=f.prototype;d.prototype=new e();d.prototype.constuctor=d;d.superclass=f.prototype;var a=Array.prototype.slice.call(arguments,2);for(var b,c=0;b=a[c];++c){AFrame.mixin(d.prototype,b)}},mixin:function(b,a){b=jQuery.extend(b,a)},construct:function(h){var i=h.type;var b=h.config||{};var c=h.plugins||[];var a;if(i){try{a=new i()}catch(g){console.log(g.toString())}for(var f=0,d;d=c[f];++f){var j=AFrame.construct(d);j.setPlugged(a)}a.init(b)}else{throw"Class does not exist."}return a},remove:function(a,b){a[b]=null;delete a[b]},currentID:0,getUniqueID:function(){this.currentID++;return"cid"+this.currentID},defined:function(a){return"undefined"!=typeof(a)},func:function(a){return"function"==typeof(a)}};AFrame.Observable=function(){};AFrame.Observable.getInstance=function(){return AFrame.construct({type:AFrame.Observable})};AFrame.Observable.prototype={init:function(){this.callbacks={}},teardown:function(){this.unbindAll()},trigger:function(){this.triggered=true;for(var a in this.callbacks){var b=this.callbacks[a];b.apply(this,arguments)}},bind:function(b){var a=AFrame.getUniqueID();this.callbacks[a]=b;return a},unbind:function(a){AFrame.remove(this.callbacks,a)},unbindAll:function(){for(var a in this.callbacks){AFrame.remove(this.callbacks,a)}},isTriggered:function(){return !!this.triggered}};AFrame.ObservablesMixin={triggerEvent:function(){var a=arguments[0];var c=this.events&&this.events[a];if(c){var b=Array.prototype.slice.call(arguments,1);c.trigger.apply(c,b)}},isEventTriggered:function(b){var a=false;var c=this.events&&this.events[b];if(c){a=c.isTriggered()}return a},bindEvent:function(b,e,c){this.events=this.events||{};var d=this.events[b]||AFrame.Observable.getInstance();this.events[b]=d;var a=d.bind(e.bind(c||this));this.bindings=this.bindings||{};this.bindings[a]={object:c,observable:d};if(c&&c.bindTo){c.bindTo(this,a)}return a},unbindEvent:function(b){var a=this.bindings&&this.bindings[b];if(a){AFrame.remove(this.bindings,b);if(a.object&&a.object.unbindTo){a.object.unbindTo(b)}return a.observable.unbind(b)}},unbindAll:function(){for(var a in this.events){this.events[a].unbindAll();AFrame.remove(this.events,a)}for(var c in this.bindings){var b=this.bindings[c];AFrame.remove(this.bindings,c);if(b.object&&b.object.unbindTo){b.object.unbindTo(c)}}},proxyEvents:function(b,a){a.forEach(function(c,d){b.bindEvent(c,function(){var e=Array.prototype.slice.call(arguments,0);e.splice(0,0,c);this.triggerEvent.apply(this,e)}.bind(this),this)},this)},bindTo:function(a,b){this.boundTo=this.boundTo||{};this.boundTo[b]=this.boundTo[b]||{object:a}},unbindTo:function(b){var a=this.boundTo[b];if(a){a.object.unbindEvent(b);AFrame.remove(this.boundTo,b)}},unbindToAll:function(){for(var b in this.boundTo){var a=this.boundTo[b];a.object.unbindEvent(b);AFrame.remove(this.boundTo,b)}this.boundTo=null;this.boundTo={}}};AFrame.AObject=function(){};AFrame.mixin(AFrame.AObject.prototype,{constructor:AFrame.AObject,init:function(a){this.config=a;this.cid=a.cid||AFrame.getUniqueID();this.children={};this.bindEvents();this.triggerEvent("onInit")},getConfig:function(){return this.config},bindEvents:function(){},teardown:function(){this.triggerEvent("onTeardown");this.unbindAll();this.unbindToAll();this.teardownChildren();this.config=this.cid=this.children=null},teardownChildren:function(){for(var b in this.children){var a=this.children[b];a.teardown();AFrame.remove(this.children,b)}},getCID:function(){return this.cid},addChild:function(a){this.children[a.getCID()]=a},removeChild:function(a){AFrame.remove(this.children,a)}});AFrame.mixin(AFrame.AObject.prototype,AFrame.ObservablesMixin);AFrame.DataContainer=function(a){if(a instanceof AFrame.DataContainer){return a}else{if(a){var b=a.__dataContainer;if(!b){b=AFrame.construct({type:AFrame.DataContainer,config:{data:a}})}return b}}AFrame.DataContainer.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.DataContainer,AFrame.AObject,{init:function(a){this.data=a.data||{};this.data.__dataContainer=this;this.fieldBindings={};AFrame.DataContainer.superclass.init.apply(this,arguments)},set:function(d,c){var b=this.data[d];this.data[d]=c;var a=this.getEventObject(d,c,b);this.triggerEvent("onSet",a);this.triggerEvent("onSet-"+d,a);return b},get:function(a){return this.data[a]},bindField:function(d,c,b){var a=this.getEventObject(d,this.get(d),undefined);c.call(b,a);return this.bindEvent("onSet-"+d,c,b)},unbindField:function(a){return this.unbindEvent(a)},getEventObject:function(c,b,a){return{container:this,fieldName:c,oldValue:a,value:b}},forEach:function(c,b){for(var a in this.data){if(a!=="__dataContainer"){c.call(b,this.data[a],a)}}}});AFrame.Plugin=function(){AFrame.Plugin.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.Plugin,AFrame.AObject,{setPlugged:function(a){this.plugged=a;this.plugged.bindEvent("onTeardown",this.teardown,this)},getPlugged:function(){return this.plugged},teardown:function(){AFrame.remove(this,"plugged");AFrame.Plugin.superclass.teardown.apply(this,arguments)}});AFrame.ArrayCommonFuncsMixin={getCount:function(){throw"operation not supported"},getActualInsertIndex:function(b){var a=this.getCount();if("undefined"==typeof(b)){b=a}else{if(b<0){b=a+(b+1)}}b=Math.max(0,b);b=Math.min(a,b);return b},getActualRemoveIndex:function(b){var a=this.getCount();if(b<0){b=a+b}b=Math.min(a-1,b);b=Math.max(0,b);return b}};AFrame.MVCHash=function(){AFrame.MVCHash.superclass.constructor.apply(this,arguments)};AFrame.MVCHash.currID=0;AFrame.extend(AFrame.MVCHash,AFrame.AObject,{init:function(a){this.hash={};AFrame.MVCHash.superclass.init.apply(this,arguments)},teardown:function(){for(var a in this.hash){AFrame.remove(this.hash,a)}AFrame.remove(this,"hash");AFrame.MVCHash.superclass.teardown.apply(this,arguments)},set:function(d,a,c){a.cid=d;var b=this.getEventData(a,c);b.meta.previousItem=this.get(d);this.triggerEvent("onBeforeSet",b);this.hash[d]=a;this.triggerEvent("onSet",b)},get:function(a){return this.hash[a]},remove:function(d,c){var a=this.get(d);if(a){var b=this.getEventData(a,c);this.triggerEvent("onBeforeRemove",b);AFrame.remove(this.hash,d);this.triggerEvent("onRemove",b)}return a},insert:function(a,c){var d=a.cid||c&&c.cid||AFrame.getUniqueID();if("undefined"!=typeof(this.get(d))){throw"duplicate cid"}a.cid=d;var b=this.getEventData(a,c);this.triggerEvent("onBeforeInsert",b);this.hash[d]=a;this.triggerEvent("onInsert",b);return d},clear:function(){for(var a in this.hash){this.remove(a)}},getCount:function(){var a=0;for(var b in this.hash){a++}return a},getEventData:function(a,b){b=b||{};b.cid=a.cid;return{item:a,meta:b,collection:this}}});AFrame.MVCArray=function(){AFrame.MVCArray.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.MVCArray,AFrame.AObject,AFrame.ArrayCommonFuncsMixin,{init:function(){this.itemCIDs=[];this.hash=AFrame.construct({type:AFrame.MVCHash});this.proxyEvents(this.hash,["onBeforeInsert","onInsert","onBeforeRemove","onRemove","onBeforeSet","onSet"]);AFrame.MVCArray.superclass.init.apply(this,arguments)},teardown:function(){this.itemCIDs.forEach(function(b,a){this.itemCIDs[a]=null},this);AFrame.remove(this,"itemCIDs");this.hash.teardown();AFrame.MVCArray.superclass.teardown.apply(this,arguments)},insert:function(b,d){var a=d&&"number"==typeof(d.index)?d.index:-1;var c=this.getActualInsertIndex(a);var e=this.hash.insert(b,this.getArrayMeta(c,d));this.itemCIDs.splice(c,0,e);return e},get:function(b){var c=this.getCID(b);var a;if(c){a=this.hash.get(c)}return a},remove:function(b,c){var d;if("string"==typeof(b)){d=b;b=this.getIndex(b)}else{b=this.getActualRemoveIndex(b);d=this.getCID(b)}var a;if(b>-1){this.itemCIDs.splice(b,1);a=this.hash.remove(d,this.getArrayMeta(b,c))}return a},clear:function(){this.itemCIDs.forEach(function(b,a){this.hash.remove(b,this.getArrayMeta(a));this.itemCIDs[a]=null},this);this.itemCIDs=[]},getCount:function(){return this.itemCIDs.length},getArray:function(){var a=[];this.itemCIDs.forEach(function(c,b){a[b]=this.hash.get(c)});return a},getArrayMeta:function(a,b){b=b||{};b.index=a;b.collection=this;return b},getCID:function(a){var b=a;if("number"==typeof(a)){b=this.itemCIDs[a]}return b},getIndex:function(a){if("string"==typeof(a)){a=this.itemCIDs.indexOf(a)}return a}});AFrame.Display=function(){AFrame.Display.superclass.constructor.apply(this,arguments)};AFrame.Display.currDOMEventID=0;AFrame.extend(AFrame.Display,AFrame.AObject,{init:function(a){this.target=$(a.target);if(!this.target.length){throw"invalid target"}this.domEvents={};AFrame.Display.superclass.init.apply(this,arguments)},teardown:function(){for(var a in this.domEvents){this.unbindDOMEvent(a)}},getTarget:function(){return this.target},getDOMElement:function(){return this.getTarget()[0]},bindDOMEvent:function(e,a,g,b){var c=g.bind(b||this);var d=this.getEventTarget(e);d.bind(a,c);AFrame.Display.currDOMEventID++;var f=AFrame.Display.currDOMEventID;this.domEvents[f]={target:d,eventName:a,callback:c};return f},bindClick:function(b,c,a){return this.bindDOMEvent(b,"click",function(d){d.preventDefault();c.call(a,d)},a)},unbindDOMEvent:function(b){var a=this.domEvents[b];if(a){a.target.unbind(a.eventName,a.callback);a.target=null;a.eventName=null;a.callback=null;AFrame.remove(this.domEvents,b)}},getEventTarget:function(b){var a;if("string"==typeof(b)){a=$(b,this.getTarget())}else{a=$(b)}return a}});AFrame.List=function(){AFrame.List.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.List,AFrame.Display,AFrame.ArrayCommonFuncsMixin,{init:function(a){this.createListElementCallback=a.createListElementCallback;AFrame.List.superclass.init.apply(this,arguments)},clear:function(){this.getTarget().html("")},insert:function(c,d){d=d||{};var a=this.getActualInsertIndex(d.index);d.index=a;var b=this.createListElementCallback(d,c);a=this.insertElement(b,d);this.triggerEvent("onInsert",{rowElement:b,data:c,meta:d});return a},insertElement:function(d,f){f=f||{};var e=this.getTarget();var c=e.children();var b=this.getActualInsertIndex(f.index);if(b===c.length){e.append(d)}else{var a=c.eq(b);d.insertBefore(a)}this.triggerEvent("onInsertElement",{rowElement:d,meta:f});return b},remove:function(a,d){d=d||{};var b=this.getActualRemoveIndex(a);d.index=b;var c=this.getTarget().children().eq(b).remove();this.triggerEvent("onRemoveElement",{rowElement:c,meta:d})},getCount:function(){return this.getTarget().children().length}});AFrame.ListPluginBindToCollection=function(){AFrame.ListPluginBindToCollection.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.ListPluginBindToCollection,AFrame.Plugin,{init:function(a){this.collection=a.collection;this.collection.bindEvent("onInsert",this.onInsert,this);this.collection.bindEvent("onRemove",this.onRemove,this);this.cids=[];AFrame.ListPluginBindToCollection.superclass.init.apply(this,arguments)},setPlugged:function(a){a.getIndex=this.getIndex.bind(this);AFrame.ListPluginBindToCollection.superclass.setPlugged.apply(this,arguments)},onInsert:function(b){var a=this.getPlugged().insert(b.item,b.meta);this.cids.splice(a,0,b.meta.cid)},onRemove:function(b){var a=this.cids.indexOf(b.meta.cid);this.getPlugged().remove(a);this.cids.splice(a,1)},getIndex:function(b){var a=b;if("string"==typeof(b)){a=this.cids.indexOf(b)}return a}});AFrame.CollectionPluginPersistence=function(){AFrame.CollectionPluginPersistence.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.CollectionPluginPersistence,AFrame.Plugin,{init:function(a){this.addCallback=a.addCallback||this.noPersistenceOp;this.saveCallback=a.saveCallback||this.noPersistenceOp;this.loadCallback=a.loadCallback||this.noPersistenceOp;this.deleteCallback=a.deleteCallback||this.noPersistenceOp;AFrame.CollectionPluginPersistence.superclass.init.apply(this,arguments)},noPersistenceOp:function(a,b,c){c(a,b)},setPlugged:function(a){a.add=this.add.bind(this);a.load=this.load.bind(this);a.del=this.del.bind(this);a.save=this.save.bind(this);AFrame.CollectionPluginPersistence.superclass.setPlugged.apply(this,arguments)},add:function(a,b){b=this.getMeta(b);this.addCallback(a,b,function(){this.getPlugged().insert(a,b);b.callback&&b.callback(a,b)}.bind(this))},load:function(a){a=this.getMeta(a);this.loadCallback(a,function(b){if(b){var c=this.getPlugged();b.forEach(function(e,d){c.insert(e)})}a.callback&&a.callback(b,a)}.bind(this))},del:function(c,b){var a=this.getPlugged().get(c);if(a){b=this.getMeta(b);this.deleteCallback(a,b,function(){this.getPlugged().remove(c,b);b.callback&&b.callback(a,b)}.bind(this))}},save:function(c,b){var a=this.getPlugged().get(c);if(a){b=this.getMeta(b);this.saveCallback(a,b,function(){b.callback&&b.callback(a,b)}.bind(this))}},getMeta:function(a){a=a||{};a.collection=this.getPlugged();return a}});AFrame.Form=function(){AFrame.Form.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.Form,AFrame.Display,{init:function(a){this.formFieldFactory=a.formFieldFactory;this.formElements=[];this.formFields=[];AFrame.Form.superclass.init.apply(this,arguments);this.bindFormElements()},bindFormElements:function(){var a=$("[data-field]",this.getTarget());a.each(function(b,c){this.bindFormElement(c)}.bind(this))},teardown:function(){this.formFields&&this.formFields.forEach(function(b,a){b.teardown();this.formFields[a]=null},this);this.formFields=null;this.formElements=null;AFrame.Form.superclass.teardown.apply(this,arguments)},bindFormElement:function(a){var c=$(a);this.formElements.push(c);var b=this.formFieldFactory(c);this.formFields.push(b);return b},getFormElements:function(){return this.formElements},getFormFields:function(){return this.formFields},checkValidity:function(){var b=true;for(var a=0,c;(c=this.formFields[a])&&b;++a){b=c.checkValidity()}return b},clear:function(){this.fieldAction("clear")},reset:function(){this.fieldAction("reset")},save:function(){var a=this.checkValidity();if(a){this.fieldAction("save")}return a},fieldAction:function(a){this.formFields.forEach(function(c,b){c[a]()})}});AFrame.Field=function(){AFrame.Field.superclass.constructor.apply(this,arguments)};AFrame.Field.cancelInvalid=false;AFrame.extend(AFrame.Field,AFrame.Display,{init:function(a){AFrame.Field.superclass.init.apply(this,arguments);this.resetVal=this.getDisplayed();this.display(this.getPlaceholder());this.html5Validate=!!this.getTarget()[0].checkValidity},bindEvents:function(){var a=this.getTarget();this.bindDOMEvent(a,"keyup",this.onFieldChange,this);this.bindDOMEvent(a,"focus",this.onFieldFocus,this);this.bindDOMEvent(a,"blur",this.onFieldBlur,this);this.bindDOMEvent(a,"invalid",this.onFieldInvalid,this);AFrame.Field.superclass.bindEvents.apply(this,arguments)},getPlaceholder:function(){var a=this.getTarget();return a.attr("placeholder")||""},set:function(a){this.resetVal=a;a=a||this.getPlaceholder();this.display(a)},display:function(c){var b=this.getTarget();var a=c==this.getPlaceholder()?"addClass":"removeClass";b[a]("empty");if(this.isValBased(b)){b.val(c)}else{b.html(c)}},getDisplayed:function(){var b=this.getTarget();var a="";if(this.isValBased(b)){a=b.val()}else{a=b.html()}return a},reset:function(){this.set(this.resetVal)},checkValidity:function(){this.validityState=AFrame.FieldValidityState.getInstance(this.getTarget()[0].validity);var a=this.validate();this.validityStateIsCurrent=true;return a},validate:function(){var a=true;if(this.html5Validate){a=this.getTarget()[0].checkValidity()}else{var b=this.getTarget().hasAttr("required");a=(!b||!!this.get().length);if(!a){this.setError("valueMissing")}}return a},getValidityState:function(){if(!this.validityStateIsCurrent){this.checkValidity()}return this.validityState},setError:function(a){this.validityState.setError(a)},setCustomError:function(a){this.validityState.setCustomError(a)},clear:function(){this.set("")},get:function(){return this.resetVal},save:function(){var a=this.getDisplayed();if(a==this.getPlaceholder()){a=""}this.resetVal=a},onFieldChange:function(a){this.triggerEvent("onChange",this.get());this.validityStateIsCurrent=false},onFieldFocus:function(){if(this.getDisplayed()==this.getPlaceholder()){this.display("")}},onFieldBlur:function(){if(""===this.getDisplayed()){this.display(this.getPlaceholder())}},onFieldInvalid:function(a){if(AFrame.Field.cancelInvalid){a.preventDefault()}},isValBased:function(a){return a.is("input")||a.is("textarea")}});$.fn.hasAttr=function(a){return typeof(this.attr(a))!="undefined"};AFrame.Schema=function(){};AFrame.Schema.prototype={init:function(a){this.schema=a.schema},getDefaults:function(){var a={};for(var b in this.schema){a[b]=this.getDefaultValue(b)}return a},getDefaultValue:function(a){var b=this.schema[a].def;if(AFrame.func(b)){b=b()}else{if(this.schema[a].has_many){b=[]}else{if(AFrame.Schema.getSchema(this.schema[a].type)){b={}}}}return b},getAppData:function(a){var b={};this.forEach(function(d,c){var e=a[c];if(!AFrame.defined(e)){e=this.getDefaultValue(c)}if(d.has_many){e&&e.forEach&&e.forEach(function(g,f){e[f]=this.getAppDataValue(g,d,a,b)},this)}else{e=this.getAppDataValue(e,d,a,b)}b[c]=e},this);return b},getAppDataValue:function(d,c,f,g){var b=AFrame.Schema.getSchema(c.type);if(b){d=b.getAppData(d)}else{if(AFrame.defined(d)){var e=AFrame.Schema.appDataCleaners[c.type];if(AFrame.func(e)){d=e(d)}}}var a=c.fixup;if(AFrame.func(a)){d=a({value:d,data:f,fixed:g})}return d},getFormData:function(b){var a={};this.forEach(function(d,c){if(d.save!==false){var e=b[c];if(d.has_many){e&&e.forEach&&e.forEach(function(g,f){e[f]=this.getFormDataValue(g,d,b,a)},this)}else{e=this.getFormDataValue(e,d,b,a)}a[c]=e}},this);return a},getFormDataValue:function(f,e,c,b){var a=e.cleanup;if(AFrame.defined(a)){f=a({value:f,data:c,cleaned:b})}if(AFrame.defined(f)){var d=AFrame.Schema.getSchema(e.type);if(d){f=d.getFormData(f)}else{var g=AFrame.Schema.formDataCleaners[e.type];if(AFrame.func(g)){f=g(f)}}}return f},forEach:function(d,b){for(var a in this.schema){var c=this.schema[a];d.call(b,c,a)}}};AFrame.mixin(AFrame.Schema,{appDataCleaners:{},formDataCleaners:{},schemaConfigs:{},schemaCache:{},addAppDataCleaner:function(a,b){AFrame.Schema.appDataCleaners[a]=b},addFormDataCleaner:function(a,b){AFrame.Schema.formDataCleaners[a]=b},addSchemaConfig:function(b,a){AFrame.Schema.schemaConfigs[b]=a},getSchema:function(a){if(!AFrame.Schema.schemaCache[a]&&AFrame.Schema.schemaConfigs[a]){AFrame.Schema.schemaCache[a]=AFrame.construct({type:AFrame.Schema,config:{schema:AFrame.Schema.schemaConfigs[a]}})}return AFrame.Schema.schemaCache[a]}});AFrame.Schema.addAppDataCleaner("number",function(a){return parseFloat(a)});AFrame.Schema.addAppDataCleaner("integer",function(a){return parseInt(a,10)});AFrame.Schema.addAppDataCleaner("iso8601",function(g){try{var c=g.split("T"),i=c[0].split("-"),h=c[1].split("Z"),d=h[0].split(":"),a=d[2].split("."),b=Number(d[0]),j=new Date;j.setUTCFullYear(Number(i[0]));j.setUTCMonth(Number(i[1])-1);j.setUTCDate(Number(i[2]));j.setUTCHours(Number(b));j.setUTCMinutes(Number(d[1]));j.setUTCSeconds(Number(a[0]));if(a[1]){j.setUTCMilliseconds(Number(a[1]))}return j}catch(f){}});AFrame.Schema.addFormDataCleaner("iso8601",function(a){return a.toISOString()});AFrame.ListPluginFormRow=function(){AFrame.ListPluginFormRow.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.ListPluginFormRow,AFrame.Plugin,{init:function(a){this.formFactory=a.formFactory;this.forms=[];AFrame.ListPluginFormRow.superclass.init.apply(this,arguments)},setPlugged:function(a){a.bindEvent("onInsert",this.onInsertRow,this);a.bindEvent("onRemove",this.onRemoveRow,this);a.validate=this.validate.bind(this);a.save=this.save.bind(this);a.reset=this.reset.bind(this);a.clear=this.clear.bind(this);AFrame.ListPluginFormRow.superclass.setPlugged.apply(this,arguments)},teardown:function(){this.forms.forEach(function(b,a){b.teardown();this.forms[a]=null},this);AFrame.ListPluginFormRow.superclass.teardown.apply(this,arguments)},onInsertRow:function(b){var a=this.createForm(b.rowElement,b);this.forms.splice(b.meta.index,0,a)},onRemoveRow:function(c){var a=c.meta.index;var b=this.forms[a];b.teardown();this.forms[a]=null;this.forms.splice(a,1)},createForm:function(b,c){var a=this.formFactory(b,c);return a},validate:function(a){var c=true;var b;if(AFrame.defined(a)){b=this.forms[a];if(b){c=b.validate()}}else{for(a=0;c&&(b=this.forms[a]);++a){c=b.validate()}}return c},save:function(a){this.formFunc(a,"save")},reset:function(a){this.formFunc(a,"reset")},clear:function(a){this.formFunc(a,"clear")},formFunc:function(a,c){if(AFrame.defined(a)){var b=this.forms[a];if(b){b[c]()}}else{this.forms.forEach(function(e,d){e[c]()})}}});AFrame.DataForm=function(){AFrame.DataForm.superclass.constructor.apply(this,arguments)};AFrame.extend(AFrame.DataForm,AFrame.Form,{init:function(a){this.dataContainer=AFrame.DataContainer(a.dataSource);AFrame.DataForm.superclass.init.apply(this,arguments)},teardown:function(){this.dataContainer=null;AFrame.DataForm.superclass.teardown.apply(this,arguments)},bindFormElement:function(a){var b=AFrame.DataForm.superclass.bindFormElement.apply(this,arguments);var c=$(a).attr("data-field");this.dataContainer.bindField(c,function(d){this.set(d.value)}.bind(b),this);return b},save:function(){var b=AFrame.DataForm.superclass.save.apply(this,arguments);if(b){var a=this.getFormFields();a.forEach(function(d,c){var e=d.getTarget().attr("data-field");this.dataContainer.set(e,d.get())},this)}return b}});